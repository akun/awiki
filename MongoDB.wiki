= MongoDB =

* 释放MongoDB空间慎用：http://dikar.iteye.com/blog/1028243
* 文档学习：http://wenku.it168.com/redian/mongoDB/
* 必须明确指定类型：db.data.update({'name': 'zero'}, {'$set': {'value': NumberInt(0)}})
* 调式MapReduce：http://stackoverflow.com/questions/7527126/mongodb-how-to-debug-map-reduce-on-mongodb-shell
  * print + 看日志
* MapReduce必须存在collection：http://stackoverflow.com/questions/10284048/mongodb-map-reduce-to-get-uniques-by-date-day
* pymongo的save方法要慎用
* 后台索引：db.people.ensureIndex( { zipcode: 1}, {background: true} )
* http://stackoverflow.com/questions/10298354/cursor-id-not-valid-error

setup in Ubuntu

http://docs.mongodb.org/manual/tutorial/install-mongodb-on-ubuntu/

== 经验 ==

* 判断是否有记录用find_one，别用count，效率更好
* profile：http://docs.mongodb.org/manual/tutorial/manage-the-database-profiler/
* 最大连接数：http://www.qttc.net/201304300.html
* 从数据库长时间没同步数据：http://stackoverflow.com/questions/11537977/rs102-mongodb-on-replicaset
* MapReduce优化：http://www.iteye.com/news/28013

== 有用命令 ==

* 集群状态：mongostat --discover

== PyMongo ==

* find_and_modify
  * Returns either the object before or after modification based on new parameter. If no objects match the query and upsert is false, returns None. If upserting and new is false, returns {}.

会自动生成ID

{{{
ObjectId()
ObjectId(None)
}}}

== mms ==

实际是封装db.serverStatus()的结果信息
